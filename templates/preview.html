<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù„ÙˆØ¬Ùˆ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #1a1a1a; color: #fff; font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; display: flex; gap: 20px; }
        .preview { flex: 1; }
        .controls { width: 280px; background: #222; padding: 20px; border-radius: 8px; height: fit-content; }
        .preview-box { background: #000; border: 2px solid #444; aspect-ratio: 16/9; position: relative; overflow: hidden; border-radius: 8px; }
        .stream-bg { width: 100%; height: 100%; background-image: url('/static/preview_bg.png'); background-size: cover; background-position: center; display: flex; align-items: center; justify-content: center; }
        .logo { position: absolute; width: 150px; top: 0; right: 0; }
        .logo img { width: 100%; height: auto; }
        .control-group { margin-bottom: 15px; }
        label { display: block; font-size: 11px; color: #aaa; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 8px; background: #333; border: 1px solid #555; color: #fff; border-radius: 4px; }
        input:focus { outline: none; border-color: #66bb6a; }
        .value { font-size: 11px; color: #66bb6a; margin-top: 3px; font-weight: bold; }
        .info { background: #2a2a2a; border-left: 3px solid #66bb6a; padding: 10px; margin-top: 15px; font-size: 10px; line-height: 1.5; }
        button { width: 100%; margin-top: 8px; padding: 6px; background: #66bb6a; color: #000; border: none; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: bold; }
        button:hover { background: #81c784; }
        @media (max-width: 768px) { .container { flex-direction: column; } .controls { width: 100%; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="preview">
            <h2 style="margin-bottom: 15px;">ğŸ¬ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø«</h2>
            <div class="preview-box">
                <div class="stream-bg"></div>
                <div class="logo" id="logoPreview">
                    <img src="/static/logo.png" alt="Logo" style="width: 100%; height: auto;">
                </div>
            </div>
        </div>
        
        <div class="controls">
            <h3 style="margin-bottom: 15px;">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
            
            <div class="control-group">
                <label>Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø£ÙÙ‚ÙŠ (X)</label>
                <input type="number" id="offsetX" min="-200" max="200">
                <div class="value" id="valueX">0px</div>
                <small style="color: #666; font-size: 9px;">Ø³Ø§Ù„Ø¨ = ÙŠÙ…ÙŠÙ† | Ù…ÙˆØ¬Ø¨ = ÙŠØ³Ø§Ø±</small>
            </div>
            
            <div class="control-group">
                <label>Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ (Y)</label>
                <input type="number" id="offsetY" min="-200" max="200">
                <div class="value" id="valueY">0px</div>
                <small style="color: #666; font-size: 9px;">Ø³Ø§Ù„Ø¨ = ÙÙˆÙ‚ | Ù…ÙˆØ¬Ø¨ = ØªØ­Øª</small>
            </div>
            
            <div class="control-group">
                <label>Ø­Ø¬Ù… Ø§Ù„Ù„ÙˆØ¬Ùˆ (px)</label>
                <input type="number" id="logoSize" min="100" max="500" value="150" step="10">
                <div class="value" id="valueSize">150px</div>
            </div>
            
            <div class="control-group">
                <label>Ø§Ù„Ø´ÙØ§ÙÙŠØ© (%)</label>
                <input type="range" id="opacity" min="0" max="100" value="100">
                <div class="value" id="valueOpacity">100%</div>
            </div>
            
            <div class="info">
                <strong>âœ… Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙˆØ±Ø§Ù‹</strong><br><br>
                ğŸ“‹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:<br>
                <code id="copyText" style="display: block; margin-top: 8px; padding: 8px; background: #1a1a1a; border-radius: 3px; font-family: monospace; font-size: 9px;"></code>
                <button onclick="copyToClipboard()">ğŸ“‹ Ø§Ù†Ø³Ø®</button>
            </div>
        </div>
    </div>

    <script>
        const logo = document.getElementById('logoPreview');
        const offsetXInput = document.getElementById('offsetX');
        const offsetYInput = document.getElementById('offsetY');
        const sizeInput = document.getElementById('logoSize');
        const opacityInput = document.getElementById('opacity');
        const copyText = document.getElementById('copyText');

        fetch('/api/config')
            .then(r => r.json())
            .then(data => {
                offsetXInput.value = data.offset_x.replace(/['"]/g, '');
                offsetYInput.value = data.offset_y.replace(/['"]/g, '');
                sizeInput.value = data.size || 150;
                opacityInput.value = (data.opacity || 1.0) * 100;
                update();
            })
            .catch(() => update());

        function update() {
            const x = parseInt(offsetXInput.value) || 0;
            const y = parseInt(offsetYInput.value) || 0;
            const size = parseInt(sizeInput.value);
            const opacity = parseInt(opacityInput.value) / 100;
            
            logo.style.width = size + 'px';
            logo.style.right = x + 'px';
            logo.style.top = Math.max(0, y) + 'px';
            logo.style.bottom = (y < 0 ? Math.abs(y) : 'auto') + (y < 0 ? 'px' : '');
            logo.style.opacity = opacity;
            
            document.getElementById('valueX').textContent = x + 'px';
            document.getElementById('valueY').textContent = y + 'px';
            document.getElementById('valueSize').textContent = size + 'px';
            document.getElementById('valueOpacity').textContent = opacity * 100 + '%';
            
            copyText.textContent = `LOGO_OFFSET_X = "${x}"\nLOGO_OFFSET_Y = "${y}"`;
        }

        function copyToClipboard() {
            const x = offsetXInput.value;
            const y = offsetYInput.value;
            const text = `LOGO_OFFSET_X = "${x}"\nLOGO_OFFSET_Y = "${y}"`;
            navigator.clipboard.writeText(text).then(() => {
                alert('âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!');
            });
        }

        offsetXInput.addEventListener('input', update);
        offsetYInput.addEventListener('input', update);
        sizeInput.addEventListener('input', update);
        opacityInput.addEventListener('input', update);
    </script>
</body>
</html>
